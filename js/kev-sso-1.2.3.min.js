/* author: Kev7n Wang
 * description: supports single sign on & single sign out
 * noteï¼š Need to reference jQuery Library.
 * version: beta v1.2.3
 */
var kevsso;(function(e){var t={baseApiAddress:"http://192.168.0.233:911",passportKeyName:"passport"},n=function(){function e(){}return e.isType=function(e,t,n){return typeof e==t&&e.constructor==n},e.isArray=function(e){return this.isType(e,"object",Array)},e.isString=function(e){return this.isType(e,"string",String)},e.isNumber=function(e){return this.isType(e,"number",Number)},e.isDate=function(e){return this.isType(e,"object",Date)},e.isFunction=function(e){return this.isType(e,"function",Function)},e.isObject=function(e){return this.isType(e,"object",Object)},e.IsURL=function(e){var t="^((https|http)?://)(([0-9]{1,3}.){3}[0-9]{1,3}|([0-9a-z_!~*'()-]+.)*([0-9a-z][0-9a-z-]{0,61})?[0-9a-z].[a-z]{2,6})(:[0-9]{1,4})?((/?)|(/[0-9a-z_!~*'().;?:@&amp;=+$,%#-]+)+/?)$",n=new RegExp(t);return n.test(e)},e.delCookie=function(e){document.cookie=e+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;"},e.clearCookie=function(e,t,n){var r=t||document.domain,i=n||"/";document.cookie=e+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain="+r+";path="+i},e.getCookie=function(e){var t,n=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(n))?unescape(t[2]):null},e.setCookie=function(e,t){var n=30,r=new Date;r.setTime(r.getTime()+n*24*60*60*1e3),document.cookie=e+"="+escape(t)+";expires="+r.toGMTString()},e.queryString=function(e,t){var n=e.match(new RegExp("[?&]"+t+"=([^&]*)(&?)","i"));return n?n[1]:n},e}();e.util=n,e.auth=function(){function e(e,r){n.isString(e)&&(t.baseApiAddress=e),n.isString(r)&&(t.passportKeyName=r),this.apiAddresses={base:t.baseApiAddress,login:t.baseApiAddress+"/passport/login",logout:t.baseApiAddress+"/passport/logout",check:t.baseApiAddress+"/passport/check"}}return e.prototype.getApiAddresses=function(){return this.apiAddresses},e.prototype.getApiOptions=function(){return t},e.prototype.isLogin=function(){var e=n.getCookie(t.passportKeyName);return e!=null&&e!==""},e.prototype.login=function(e){if(typeof e!="undefined"&&!n.isFunction(e))throw new Error("@param callback should be a function.");var r=n.getCookie(t.passportKeyName);return r!=null?null:this.getScript(this.apiAddresses.login,function(r){if(r.status===1){if(r.passport==="undefined")throw new Error("cant extract passport from data.");return n.setCookie(t.passportKeyName,r.passport),typeof e=="undefined"?null:e({status:r.status,data:r})}return{status:r.status,error:"get passport failed. server: "+r.error}})},e.prototype.logout=function(e,r){e==="undefined"||e===""||!n.isString(e)?n.delCookie(t.passportKeyName):n.clearCookie(t.passportKeyName,e),this.getScript(this.apiAddresses.logout,function(e){if(e.status!==1&&e.status!==2)throw new Error("can not single sign out. error: "+e.error);if(typeof r=="undefined")throw new Error("undefined callback function");r()})},e.prototype.getScript=function(e,t){if(e==="undefined"||!n.isString(e)||!n.IsURL(e))throw new Error("@param url, Invalid parameter.");if(typeof t!="undefined"&&!n.isFunction(t))throw new Error("@param callback, Should be a function.");$.getScript(e,function(e,n){if(n==="success")return t(data);throw new Error("Get data failed.")})},e.prototype.check=function(e){if(typeof e=="undefined"||!n.isString(e))throw new Error("@param passport, Invalid parameter.");return $.getJSON(this.apiAddresses.check+"?p="+e+"&callback=?",function(e){return e.status===0})},e}()})(kevsso||(kevsso={}))
//# sourceMappingURL=kev-sso-1.2.3.min.js.map